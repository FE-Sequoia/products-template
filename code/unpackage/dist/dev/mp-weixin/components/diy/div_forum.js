(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/diy/div_forum"],{"3e4c":function(e,t,o){},"75ef":function(e,t,o){"use strict";var s=o("3e4c"),i=o.n(s);i.a},"9e7f":function(e,t,o){"use strict";o.r(t);var s,i={uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-icons/uni-icons")]).then(o.bind(null,"2ba4"))}},r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.$toTime(e.obj[e.vm.create_time],"yyyy-MM-dd hh:mm:ss")),s=e.obj[e.vm.img]?e.$fullImgUrl(e.obj[e.vm.img]):null,i=e.$setRichTextImage(e.obj[e.vm.content]),r=e.$check_action("/praise/list","add")&&!e.check_praised,c=e.$check_action("/praise/list","del")&&e.check_praised,l=e.$check_action("/collect/list","add")&&!e.check_collected,a=e.$check_action("/collect/list","del")&&e.check_collected;e.$mp.data=Object.assign({},{$root:{m0:o,m1:s,m2:i,m3:r,m4:c,m5:l,m6:a}})},c=[],l={props:{obj:{type:Object,default:function(){return{}}},vm:{type:Object,default:function(){return{img:"img",tag:"tag",url:"url",title:"title",source:"source",description:"description",content:"content",create_time:"create_time",hits:"hits",praise_len:"praise_len",nickname:"nickname"}}}},data:function(){return{check_praised:!1,check_collected:!1}},methods:{get_praise:function(){var e=this,t=this.$store.state.user.user_id;this.$get(getApp().globalData.host+"/api/praise/count?",{source_table:"forum",source_field:"forum_id",source_id:this.obj.forum_id,user_id:t},(function(t){t.result||0===t.result?(e.check_praised=!!t.result,console.log("点赞状态：",t.result)):t.error&&(e.$toast(t.error.message),console.error(t.error))}))},add_praise:function(){var e=this,t={source_table:"forum",source_field:"forum_id",source_id:this.obj.forum_id,user_id:this.$store.state.user.user_id},o=this;this.check_praised?(this.check_praised=!1,this.$get(getApp().globalData.host+"/api/praise/del",t,(function(t){e.obj.praise_len-=1,console.log(t),e.$post(getApp().globalData.host+"/api/forum/set?forum_id="+o.obj.forum_id,{praise_len:o.obj.praise_len},(function(e){e.result?console.log("添加点赞数状态：",e.result):e.error&&console.error(e.error)}))}))):(o.check_praised=!0,this.$post(getApp().globalData.host+"/api/praise/add?",t,(function(t){o.obj.praise_len+=1,console.log(t),e.$post(getApp().globalData.host+"/api/forum/set?forum_id="+o.obj.forum_id,{praise_len:o.obj.praise_len},(function(e){e.result?console.log("添加点赞数状态：",e.result):e.error&&console.error(e.error)}))})))},get_collect:function(){var e=this,t=this.$store.state.user.user_id,o={source_table:"forum",source_field:"forum_id",source_id:this.obj.forum_id,user_id:t};this.$get(getApp().globalData.host+"/api/collect/count?",o,(function(t){if(t.result||0===t.result){var o=!!t.result;e.check_collected=o,console.log("收藏状态："+o)}else t.error&&console.error(t.error)}))},add_collect:function(){var e=this,t=this.obj,o=t.title,s=t.img,i=t.forum_id,r={title:o,img:s,source_table:"forum",source_field:"forum_id",source_id:i,user_id:this.$store.state.user.user_id};this.check_collected?(this.check_collected=!1,this.$get(getApp().globalData.host+"/api/collect/del",r,(function(t){e.$toast("取消收藏")}))):(this.check_collected=!0,this.$post(getApp().globalData.host+"/api/collect/add?",r,(function(t){e.$toast("收藏成功"),console.log(t)})))},init_tag:function(){console.log(this.obj.tag),this.obj.tag=this.obj.tag.split("|"),console.log(this.obj.tag)}},computed:{},created:function(){var e=this;setTimeout((function(){e.init_tag(),e.get_praise(),e.get_collect()}),500)}},a=l,n=(o("75ef"),o("f0c5")),u=Object(n["a"])(a,r,c,!1,null,"2a6b3f40",null,!1,i,s);t["default"]=u.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/diy/div_forum-create-component',
    {
        'components/diy/div_forum-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("9e7f"))
        })
    },
    [['components/diy/div_forum-create-component']]
]);
