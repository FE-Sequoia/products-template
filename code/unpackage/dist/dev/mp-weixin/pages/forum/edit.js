(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/forum/edit"],{"0763":function(t,e,o){"use strict";var n=o("2b87"),a=o.n(n);a.a},"2b87":function(t,e,o){},"74b5":function(t,e,o){"use strict";var n,a={uniDataSelect:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-data-select/uni-data-select")]).then(o.bind(null,"b904"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.$fullImgUrl(t.obj.img));t.$mp.data=Object.assign({},{$root:{m0:o}})},r=[],s=o("ccc2"),u=s["a"],c=(o("0763"),o("f0c5")),l=Object(c["a"])(u,i,r,!1,null,null,null,!1,a,n);e["a"]=l.exports},afe4:function(t,e,o){"use strict";o.r(e),function(t){o("6cdc"),o("66fd");var e=o("74b5");wx.__webpack_require_UNI_MP_PLUGIN__=o,t(e["a"])}.call(this,o("543d")["createPage"])},ccc2:function(t,e,o){"use strict";(function(t){var n=o("dc88"),a=function(){o.e("components/diy/bar_title").then(function(){return resolve(o("a3ca"))}.bind(null,o)).catch(o.oe)};e["a"]={mixins:[n["a"]],components:{bar_title:a},data:function(){return{url_get_obj:"~/api/forum/get_obj?",url_add:"~/api/forum/add",url_set:"~/api/forum/set",url_get_type_list:"~/api/forum_type/get_list",field:"forum_id",query:{forum_id:0},obj:{forum_id:0,title:"",content:"",description:"",display:0,tag:"",type:"",img:"",nickname:""},type_list:[]}},methods:{get_forum_type:function(){var t=this;this.$get(this.url_get_type_list,{},(function(e,o){console.log(e),t.type_list=e.result.list.map((function(t){return{value:t.name,text:t.name}}))}))},change_avatar:function(e){var o=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(n){var a=n.tempFilePaths,i=t.uploadFile({url:o.$fullUrl("/api/forum/upload?"),filePath:a[0],name:"file",header:{"x-auth-token":o.$store.state.user.token},success:function(t){var n=JSON.parse(t.data).result.url;console.log(n);var a=JSON.parse(t.data).result.url;o.$post("~/api/forum/set?forum_id="+e,{img:a},(function(t){o.obj.img=n}))}});i.onProgressUpdate((function(t){o.percent=t.progress,console.log("上传进度"+t.progress),console.log("已经上传的数据长度"+t.totalBytesSent),console.log("预期需要上传的数据总长度"+t.totalBytesExpectedToSend)}))},error:function(t){console.log(t)}})},submit_main:function(){var e=this,o=e.obj;delete o.update_time,delete o.create_time,e.$post(e.url_set+"?forum_id="+o.forum_id,o,(function(e,o){t.showToast({icon:"success",title:"保存成功"}),setTimeout((function(){t.hideToast(),t.navigateTo({url:"/pages/forum/table"})}),1500)}))}},created:function(){this.get_forum_type()}}}).call(this,o("543d")["default"])}},[["afe4","common/runtime","common/vendor"]]]);