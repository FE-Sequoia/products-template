(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/forum/add"],{"360d":function(e,t,n){},"38ba":function(e,t,n){"use strict";n.r(t),function(e){n("6cdc"),n("66fd");var t=n("45d4");wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t["a"])}.call(this,n("543d")["createPage"])},"45d4":function(e,t,n){"use strict";var o,a={uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-data-select/uni-data-select")]).then(n.bind(null,"b904"))}},s=function(){var e=this,t=e.$createElement,n=(e._self._c,e.$fullImgUrl(e.obj.img));e.$mp.data=Object.assign({},{$root:{m0:n}})},i=[],r=n("6de0"),u=r["a"],c=(n("b957"),n("f0c5")),l=Object(c["a"])(u,s,i,!1,null,null,null,!1,a,o);t["a"]=l.exports},"6de0":function(e,t,n){"use strict";(function(e){var o=n("dc88"),a=function(){n.e("components/diy/bar_title").then(function(){return resolve(n("a3ca"))}.bind(null,n)).catch(n.oe)};t["a"]={mixins:[o["a"]],components:{bar_title:a},data:function(){return{url_add:"~/api/forum/add",url_get_type_list:"~/api/forum_type/get_list",field:"forum_id",query:{forum_id:0},obj:{title:"",content:"",description:"",display:0,tag:"",type:"",img:"",nickname:this.$store.state.user.nickname,user_id:this.$store.state.user.user_id},placeholder:"开始输入...",type_list:[]}},methods:{get_forum_type:function(){var e=this;this.$get(this.url_get_type_list,{},(function(t,n){e.type_list=t.result.list.map((function(e){return{value:e.name,text:e.name}}))}))},change_avatar:function(t){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(t){var o=t.tempFilePaths,a=e.uploadFile({url:n.$fullUrl("/api/forum/upload?"),filePath:o[0],name:"file",header:{"x-auth-token":n.$store.state.user.token},success:function(e){var t=JSON.parse(e.data).result.url;console.log(t),n.obj.img=t}});a.onProgressUpdate((function(e){n.percent=e.progress,console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend)}))},error:function(e){console.log(e)}})},submit_main:function(){var t=this,n=t.obj;delete n.update_time,delete n.create_time,t.$post(t.url_add,n,(function(t,n){e.showToast({icon:"success",title:"保存成功"}),setTimeout((function(){e.hideToast(),e.navigateTo({url:"/pages/forum/table"})}),1500)}))}},created:function(){this.get_forum_type()}}}).call(this,n("543d")["default"])},b957:function(e,t,n){"use strict";var o=n("360d"),a=n.n(o);a.a}},[["38ba","common/runtime","common/vendor"]]]);