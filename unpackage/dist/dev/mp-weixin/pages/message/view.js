(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/view"],{"22f0":function(e,t,a){},2872:function(e,t,a){"use strict";(function(e){var s=a("dc88"),o=function(){a.e("components/diy/bar_title").then(function(){return resolve(a("a3ca"))}.bind(null,a)).catch(a.oe)};t["a"]={mixins:[s["a"]],components:{bar_title:o},data:function(){return{url_get_obj:"~/api/message/get_obj?",url_add:"~/api/message/add",url_set:"~/api/message/set",field:"message_id",query:{message_id:0},obj:{message_id:0,title:"",content:"",create_time:"",update_time:"",avatar:"",nickname:""},placeholder:"开始输入...",params:0}},methods:{change_avatar:function(t){var a=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(s){var o=s.tempFilePaths,n=e.uploadFile({url:a.$fullUrl("/api/message/upload?"),filePath:o[0],name:"file",header:{"x-auth-token":a.$store.state.user.token},success:function(e){var s=JSON.parse(e.data).result.url;console.log(s);var o=JSON.parse(e.data).result.url;a.$post("~/api/message/set?message_id="+t,{avatar:o},(function(e){a.obj.avatar=s}))}});n.onProgressUpdate((function(e){a.percent=e.progress,console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend)}))},error:function(e){console.log(e)}})},submit_main:function(){var t=this,a=t.obj;delete a.update_time,delete a.create_time,t.$post(t.url_set+"?message_id="+a.message_id,a,(function(t,a){e.showToast({title:"提交成功",icon:"success",duration:2e3})}))}}}}).call(this,a("543d")["default"])},"36a1":function(e,t,a){"use strict";a.r(t),function(e){a("6cdc"),a("66fd");var t=a("3ccf");wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t["a"])}.call(this,a("543d")["createPage"])},"3ccf":function(e,t,a){"use strict";var s,o,n=function(){var e=this,t=e.$createElement,a=(e._self._c,e.$fullImgUrl(e.obj.avatar)),s=e.$toTime(e.obj.create_time,"yyyy-MM-dd hh:mm:ss");e.$mp.data=Object.assign({},{$root:{m0:a,m1:s}})},c=[],r=a("2872"),i=r["a"],l=(a("8c37"),a("f0c5")),u=Object(l["a"])(i,n,c,!1,null,null,null,!1,s,o);t["a"]=u.exports},"8c37":function(e,t,a){"use strict";var s=a("22f0"),o=a.n(s);o.a}},[["36a1","common/runtime","common/vendor"]]]);