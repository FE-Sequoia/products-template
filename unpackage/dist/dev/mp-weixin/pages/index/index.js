(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"26b6":function(t,e,i){},"62af":function(t,e,i){"use strict";var s=i("26b6"),n=i.n(s);n.a},d537:function(t,e,i){"use strict";i.r(e),function(t){i("6cdc"),i("66fd");var e=i("f75a");wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e["a"])}.call(this,i("543d")["createPage"])},da67:function(t,e,i){"use strict";(function(t){var s=i("dc88");function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=function(){i.e("components/diy/list_customized_products").then(function(){return resolve(i("006a"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/diy/list_notification_announcement").then(function(){return resolve(i("72ed"))}.bind(null,i)).catch(i.oe)},a=function(){i.e("components/common/card").then(function(){return resolve(i("3616"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("components/diy/bar_title").then(function(){return resolve(i("a3ca"))}.bind(null,i)).catch(i.oe)},u=function(){Promise.all([i.e("common/vendor"),i.e("components/diy/list_menu")]).then(function(){return resolve(i("d457"))}.bind(null,i)).catch(i.oe)},r=function(){i.e("components/diy/list_ad").then(function(){return resolve(i("496c"))}.bind(null,i)).catch(i.oe)},_=function(){Promise.all([i.e("common/vendor"),i.e("components/diy/list_goods")]).then(function(){return resolve(i("1da7"))}.bind(null,i)).catch(i.oe)},g=function(){i.e("components/diy/list_article").then(function(){return resolve(i("948a"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/diy/list_link").then(function(){return resolve(i("d8b2"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/common/slide").then(function(){return resolve(i("9484"))}.bind(null,i)).catch(i.oe)},p=function(){i.e("components/common/notice").then(function(){return resolve(i("7f48"))}.bind(null,i)).catch(i.oe)};e["a"]={mixins:[s["a"]],components:{list_customized_products:o,list_notification_announcement:l,Card:a,bar_title:c,list_ad:r,list_menu:u,list_goods:_,list_article:g,list_link:h,Slide:d,Notice:p},data:function(){return{isSmall:!1,sendValue:"",chatList:[],showChat:!1,isAdmin:!1,token:"",scrollTop:0,oldScrollTop:0,str:"<div>测试一下</div>",list_customized_products:[],list_notification_announcement:[],list_ad:[],list_goods:[],list_slide:[],list_article:[],list_menu:[],list_link:[],list_notice:[]}},methods:{toToggle:function(){this.isAdmin=!this.isAdmin},indexkefu:function(){t.navigateTo({url:"/pages/webview/webview?url=https://chat.weixk.com/"})},openSupportModal:function(){var e=this,i=t.getStorageSync("supportChat");if(this.isAdmin="管理员"==t.getStorageSync("auth")[0].user_group,this.token=this.token||t.getStorageSync("token")||"",i&&(this.chatList=JSON.parse(i)),!this.token)return t.showToast({title:"请先进行登录",icon:"none"});console.log("打开客服"),this.showChat=!this.showChat,this.chatList.length&&this.showChat&&setTimeout((function(){e.scrollBottom()}),0)},scaleSmall:function(){this.isSmall=!this.isSmall},getChat:function(){},scroll:function(t){this.oldScrollTop=t.detail.scrollTop},scrollBottom:function(){var e=this;t.createSelectorQuery().select(".support_content").boundingClientRect((function(t){var i=t.bottom+t.height;e.scrollTop=e.oldScrollTop,e.$nextTick((function(){e.scrollTop=i+5e3}))})).exec()},sendChat:function(){var e=this,i=new Date(+new Date+288e5).toJSON().substr(0,16).replace("T"," "),s=(new Date).getTime(),n="",o=12e3;if(!this.sendValue)return t.showToast({title:"不能发送空内容",icon:"none"});this.chatList.length&&(n=s-this.chatList[this.chatList.length-1]["nowTime"]>o?i:""),!this.chatList.length&&(n=i);var l={isAdmin:this.isAdmin,content:this.sendValue,sendTime:n,nowTime:s};this.chatList.push(l),setTimeout((function(){e.scrollBottom()}),0),t.setStorageSync("supportChat",JSON.stringify(this.chatList)),this.sendValue=""},get_customized_products:function(){var t=this,e=getApp().globalData.host+"/api/customized_products/get_list?",i=this.dateFormat("yyyy-MM-dd hh:mm:ss")+"",s=getApp().globalData.host+"/api/customized_products/get_list?timing_start_time_max="+i+"&timing_end_time_min="+i+"&like=0";e=s,e=getApp().globalData.host+"/api/customized_products/get_hits_list?";var n={user_id:this.$store.state.user.user_id,examine_state:"已通过"};this.$get(e,n,(function(e){e.result&&e.result.list&&(console.log("定制商品",e.result.list),t.list_customized_products=e.result.list,t.list_customized_products.map((function(t){t["praise_len"]})),t.get_praise(t.list_customized_products,"customized_products","44885"))}))},get_notification_announcement:function(){var t=this,e=getApp().globalData.host+"/api/notification_announcement/get_list?",i={};this.$get(e,i,(function(e){e.result&&e.result.list&&(console.log("通知公告",e.result.list),t.list_notification_announcement=e.result.list,t.list_notification_announcement.map((function(t){t["praise_len"]})),t.get_praise(t.list_notification_announcement,"notification_announcement","83301"))}))},dateFormat:function(t){var e=new Date,i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[s]:("00"+i[s]).substr((""+i[s]).length)));return t},get_slides:function(){var t=this;this.$get(getApp().globalData.host+"/api/slides/get_list?",{},(function(e){e.result&&e.result.list&&(console.log("轮播图",e.result.list),t.list_slide=e.result.list,t.list_slide.map((function(t){t["praise_len"]})),t.get_praise(t.list_slides,"slides","slides_id"))}))},get_menu:function(){var t,e=this,i=this.$store.state.user.user_group;this.$get(getApp().globalData.host+"/api/auth/get_list?",(t={size:"0",get:"",user_group:i},n(t,"get",1),n(t,"position","top"),t),(function(t){t.result&&t.result.list&&(e.list_menu=t.result.list,e.list_menu.map((function(t){t["praise_len"]})),e.get_praise(e.list_auth,"auth","auth_id")),e.list_menu.push({mod_name:"天气预报",path:"/webview/urlview"}),e.list_menu.push({mod_name:"商城中心",path:"/goods/list"}),e.list_menu.unshift({mod_name:"在线考试",path:"/exam/list"}),e.list_menu.unshift({mod_name:"自动组卷",path:"/exam_subject/list"}),e.list_menu.unshift({mod_name:"在线留言",path:"/message/list"})}))},get_article:function(){var t=this;this.$get(getApp().globalData.host+"/api/article/get_list?",{page:1,size:6},(function(e){console.log(e,5666),e.result&&e.result.list&&(console.log("文章",e.result.list),t.list_article=e.result.list,t.list_article.map((function(t){t["praise_len"]})),t.get_praise(t.list_article,"article","article_id"))}))},get_ad:function(){var t=this;this.$get(getApp().globalData.host+"/api/ad/get_list?",{page:1,size:5},(function(e){e.result&&e.result.list&&(console.log("广告",e.result.list),t.list_ad=e.result.list,t.list_ad.map((function(t){t["praise_len"]})),t.get_praise(t.list_ad,"ad","ad_id"))}))},get_goods:function(){var t=this,e="/api/goods/get_list?",i={page:1,size:12};e="/api/mall_center/get_tag_list?","管理员"!=this.$store.state.user.user_group&&(i.user_id=this.$store.state.user.user_id),this.$get(getApp().globalData.host+e,i,(function(e){e.result&&e.result.list&&(console.log("商品",e.result.list),t.list_goods=e.result.list,t.list_goods.map((function(t){t["praise_len"]})),t.get_praise(t.list_goods,"goods","goods_id"))}))},get_link:function(){var t=this;this.$get(getApp().globalData.host+"/api/link/get_list?",{page:1,size:3},(function(e){e.result&&e.result.list&&(console.log("链接",e.result.list),t.list_link=e.result.list,t.list_link.map((function(t){t["praise_len"]})),t.get_praise(t.list_link,"link","link_id"))}))},get_notice:function(){var t=this;this.$get(getApp().globalData.host+"/api/notice/get_list?",{page:1,size:3},(function(e){e.result&&e.result.list&&(console.log("公告",e.result.list),t.list_notice=e.result.list,t.list_notice.map((function(t){t["praise_len"]})),t.get_praise(t.list_notice,"notice","notice_id"),console.log(t.list_notice))}))},get_praise:function(t,e,i){this.$get(getApp().globalData.host+"/api/praise/list_group?source_table="+e+"&groupby=source_id",{},(function(e){e.result&&e.result.list?e.result.list.map((function(e){for(var s=0;s<t.length;s++){var n=t[s];if(n[i]===e["source_id"]){n["praise_len"]=e["count"];break}}})):e.error&&console.error(e.error)}))}},onShow:function(){this.get_customized_products(),this.get_notification_announcement(),this.get_menu(),this.get_slides(),this.get_article(),this.get_goods(),this.get_link(),this.get_notice(),this.get_ad()}}}).call(this,i("543d")["default"])},f75a:function(t,e,i){"use strict";var s,n,o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.$check_action("/article/list","get")),s=t.$check_action("/goods/list","get"),n=t.$check_action("/customized_products/list","get"),o=t.$check_action("/notification_announcement/list","get");t.$mp.data=Object.assign({},{$root:{m0:i,m1:s,m2:n,m3:o}})},l=[],a=i("da67"),c=a["a"],u=(i("62af"),i("f0c5")),r=Object(u["a"])(c,o,l,!1,null,"4430d1a2",null,!1,s,n);e["a"]=r.exports}},[["d537","common/runtime","common/vendor"]]]);