(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/i_want_to_customize/view"],{"10f7":function(e,t,r){"use strict";var i,o={uniForms:function(){return Promise.all([r.e("common/vendor"),r.e("components/uni-forms/uni-forms")]).then(r.bind(null,"2deb"))},uniFormsItem:function(){return r.e("components/uni-forms-item/uni-forms-item").then(r.bind(null,"d8ed"))},uniEasyinput:function(){return Promise.all([r.e("common/vendor"),r.e("components/uni-easyinput/uni-easyinput")]).then(r.bind(null,"eea8"))},uniDataSelect:function(){return Promise.all([r.e("common/vendor"),r.e("components/uni-data-select/uni-data-select")]).then(r.bind(null,"b904"))},uniDatetimePicker:function(){return Promise.all([r.e("common/vendor"),r.e("components/uni-datetime-picker/uni-datetime-picker")]).then(r.bind(null,"35cd"))}},n=function(){var e=this,t=e.$createElement,r=(e._self._c,e.is_view()),i=r?e.$check_field("get","order_number")||e.$check_field("add","order_number")||e.$check_field("set","order_number"):null,o=r&&i?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","order_number")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","order_number"):null,n=r&&i&&!o?e.$check_field("get","order_number"):null,s=r?e.$check_field("get","product_number")||e.$check_field("add","product_number")||e.$check_field("set","product_number"):null,u=r&&s?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","product_number")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","product_number"):null,c=r&&s&&!u?e.$check_field("get","product_number"):null,a=r?e.$check_field("get","product_name")||e.$check_field("add","product_name")||e.$check_field("set","product_name"):null,l=r&&a?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","product_name")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","product_name"):null,_=r&&a&&!l?e.$check_field("get","product_name"):null,m=r?e.$check_field("get","cover")||e.$check_field("add","cover")||e.$check_field("set","cover"):null,h=r&&m?e.form["cover"]&&e.$check_field("set","cover"):null,d=r&&m&&h&&e.disabledObj["cover_isDisabled"]?e.$fullUrl(e.form["cover"]):null,f=r&&m&&h&&!e.disabledObj["cover_isDisabled"]?e.$fullUrl(e.form["cover"]):null,p=r&&m&&!h?!e.form["cover"]&&e.$check_field("add","cover"):null,g=r&&m&&!h&&!p?e.$check_field("get","cover"):null,v=r&&m&&!h&&!p&&g?e.$fullUrl(e.form["cover"]):null,y=r?e.$check_field("get","money")||e.$check_field("add","money")||e.$check_field("set","money"):null,b=r&&y?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","money")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","money"):null,w=r&&y&&!b?e.$check_field("get","money"):null,k=r?e.$check_field("get","seller")||e.$check_field("add","seller")||e.$check_field("set","seller"):null,$=r&&k?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","seller")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","seller"):null,z=r&&k&&!$?e.$check_field("get","seller"):null,x=r?e.$check_field("get","purchasing_users")||e.$check_field("add","purchasing_users")||e.$check_field("set","purchasing_users"):null,j=r&&x?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","purchasing_users")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","purchasing_users"):null,L=r&&x&&!j?e.$check_field("get","purchasing_users"):null,q=r?e.$check_field("get","purchase_quantity")||e.$check_field("add","purchase_quantity")||e.$check_field("set","purchase_quantity"):null,S=r&&q?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","purchase_quantity")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","purchase_quantity"):null,O=r&&q&&!S?e.$check_field("get","purchase_quantity"):null,E=r?e.$check_field("get","total_amount")||e.$check_field("add","total_amount")||e.$check_field("set","total_amount"):null,P=r&&E?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","total_amount")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","total_amount"):null,D=r&&E&&!P?e.$check_field("get","total_amount"):null,F=r?e.$check_field("get","customized_time")||e.$check_field("add","customized_time")||e.$check_field("set","customized_time"):null,T=r&&F?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","customized_time")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","customized_time"):null,A=r&&F&&!T?e.$check_field("get","customized_time"):null,I=r?e.$check_field("get","requirement_document")||e.$check_field("add","requirement_document")||e.$check_field("set","requirement_document"):null,N=r&&I?e.$check_field("get","requirement_document"):null,M=r&&I&&N&&e.form["requirement_document"]?e.$fullUrl(e.form["requirement_document"]):null,U=r&&I&&!N?e.$check_field("add","requirement_document")||e.$check_field("set","requirement_document"):null,C=r?e.$check_field("get","remarks")||e.$check_field("add","remarks")||e.$check_field("set","remarks"):null,G=r&&C?"管理员"===e.user_group||e.form["i_want_to_customize_id"]&&e.$check_field("set","remarks")||!e.form["i_want_to_customize_id"]&&e.$check_field("add","remarks"):null,J=r&&C&&!G?e.$check_field("get","remarks"):null,B=e.$check_action("/i_want_to_customize/view","set")||e.$check_action("/i_want_to_customize/view","add")||e.$check_option("/i_want_to_customize/table","examine");e.$mp.data=Object.assign({},{$root:{m0:r,m1:i,m2:o,m3:n,m4:s,m5:u,m6:c,m7:a,m8:l,m9:_,m10:m,m11:h,m12:d,m13:f,m14:p,m15:g,m16:v,m17:y,m18:b,m19:w,m20:k,m21:$,m22:z,m23:x,m24:j,m25:L,m26:q,m27:S,m28:O,m29:E,m30:P,m31:D,m32:F,m33:T,m34:A,m35:I,m36:N,m37:M,m38:U,m39:C,m40:G,m41:J,m42:B}})},s=[],u=r("17b3"),c=u["a"],a=(r("713e"),r("f0c5")),l=Object(a["a"])(c,n,s,!1,null,"91f56ebe",null,!1,o,i);t["a"]=l.exports},"17b3":function(e,t,r){"use strict";(function(e){var i=r("dc88");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(q){a=function(e,t,r){return e[t]=r}}function l(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,n=Object.create(o.prototype),s=new x(i||[]);return n._invoke=function(e,t,r){var i="suspendedStart";return function(o,n){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw n;return L()}for(r.method=o,r.arg=n;;){var s=r.delegate;if(s){var u=k(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var c=_(e,t,r);if("normal"===c.type){if(i=r.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),n}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(q){return{type:"throw",arg:q}}}e.wrap=l;var m={};function h(){}function d(){}function f(){}var p={};a(p,s,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(j([])));v&&v!==t&&r.call(v,s)&&(p=v);var y=f.prototype=h.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(n,s,u,c){var a=_(e[n],e,s);if("throw"!==a.type){var l=a.arg,m=l.value;return m&&"object"==o(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(m).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(a.arg)}var n;this._invoke=function(e,r){function o(){return new t((function(t,o){i(e,r,t,o)}))}return n=n?n.then(o,o):o()}}function k(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=_(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function j(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=f,a(y,"constructor",f),a(f,"constructor",d),d.displayName=a(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),a(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,i,o,n){void 0===n&&(n=Promise);var s=new w(l(t,r,i,o),n);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),a(y,c,"Generator"),a(y,s,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],s=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var u=r.call(n,"catchLoc"),c=r.call(n,"finallyLoc");if(u&&c){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(u){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),z(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var o=i.arg;z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}function s(e,t,r,i,o,n,s){try{var u=e[n](s),c=u.value}catch(a){return void r(a)}u.done?t(c):Promise.resolve(c).then(i,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var n=e.apply(t,r);function u(e){s(n,i,o,u,c,"next",e)}function c(e){s(n,i,o,u,c,"throw",e)}u(void 0)}))}}t["a"]={mixins:[i["a"]],data:function(){return{field:"i_want_to_customize_id",url_add:"~/api/i_want_to_customize/add?",url_set:"~/api/i_want_to_customize/set?",url_get_obj:"~/api/i_want_to_customize/get_obj?",url_upload:"~/api/i_want_to_customize/upload?",order_number:null,product_number:null,product_name:null,cover:null,money:null,seller:null,purchasing_users:null,purchase_quantity:null,total_amount:null,customized_time:null,requirement_document:null,remarks:null,query:{i_want_to_customize_id:0},form:{order_number:this.$get_stamp(),product_number:"",product_name:"",cover:"",money:"",seller:0,purchasing_users:0,purchase_quantity:0,total_amount:"",customized_time:this.$toTime((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),requirement_document:"",remarks:"",seat:"",i_want_to_customize_id:0,user_id:this.$store.state.user.user_id},disabledObj:{order_number_isDisabled:!1,product_number_isDisabled:!1,product_name_isDisabled:!1,cover_isDisabled:!1,money_isDisabled:!1,seller_isDisabled:!1,purchasing_users_isDisabled:!1,total_amount_isDisabled:!1,customized_time_isDisabled:!1,requirement_document_isDisabled:!1,remarks_isDisabled:!1},list_user_seller:[],list_user_purchasing_users:[],group_user_purchasing_users:"",limit_times:0,limit_type:0,act_limit_times:0,seatArray:[],seatRow:5,seatCol:8,seatSize:"",seatArr:[],list_:[],seatList:"",size:""}},methods:{submit_check:function(e){return this.act_limit_times>=this.limit_times?"已超过提交次数":e.customized_time?null:"定制时间不能为空"},check_limit:function(){var e=this;"管理员"===e.$store.state.user.user_group?e.limit_times=999:e.$get("~/api/customized_products/get_obj?",{product_number:e.form.product_number},(function(t){if(t.result&&t.result.obj){e.limit_times=t.result.obj.limit_times,e.limit_type=t.result.obj.limit_type;var r=e.$store.state.user.user_id,i="~/api/i_want_to_customize/count?product_number="+e.form.product_number+"&user_id="+r;if(1===e.limit_type){var o=e.$toTime(parseInt((new Date).getTime()),"yyyy-MM-dd"),n="&create_time_min="+o+" 00:00:00&create_time_max="+o+" 23:59:59";i+=n}e.$get(i,{},(function(t){e.act_limit_times=t.result}))}}))},changeLog:function(e,t){this.form[t]=e},uploadFile_:function(t){var r=this;"mp-weixin"!=e.getSystemInfoSync().uniPlatform||"devtools"==e.getSystemInfoSync().platform?e.chooseImage({count:1,success:function(e){var i=e.tempFilePaths;r.successChoose(i[0],t)}}):wx.chooseMessageFile({count:1,success:function(e){var i=e.tempFiles;r.successChoose(i[0].path,t)}})},successChoose:function(t,r){var i=this;e.uploadFile({url:getApp().globalData.host+"/api/i_want_to_customize/upload",filePath:t,name:"file",success:function(t){t.data.error?e.showToast({title:t.data.error.message,icon:"none"}):i[r]=JSON.parse(t.data).result.url}})},close_:function(e){"order_number"==e&&(this["order_number"]=this.form["order_number"]=""),"product_number"==e&&(this["product_number"]=this.form["product_number"]=""),"product_name"==e&&(this["product_name"]=this.form["product_name"]=""),"cover"==e&&(this["cover"]=this.form["cover"]=""),"money"==e&&(this["money"]=this.form["money"]=""),"seller"==e&&(this["seller"]=this.form["seller"]=""),"purchasing_users"==e&&(this["purchasing_users"]=this.form["purchasing_users"]=""),"purchase_quantity"==e&&(this["purchase_quantity"]=this.form["purchase_quantity"]=""),"total_amount"==e&&(this["total_amount"]=this.form["total_amount"]=""),"customized_time"==e&&(this["customized_time"]=this.form["customized_time"]=""),"requirement_document"==e&&(this["requirement_document"]=this.form["requirement_document"]=""),"remarks"==e&&(this["remarks"]=this.form["remarks"]="")},submit_:function(){null!==this["order_number"]&&(this.form["order_number"]=this["order_number"]),null!==this["product_number"]&&(this.form["product_number"]=this["product_number"]),null!==this["product_name"]&&(this.form["product_name"]=this["product_name"]),null!==this["cover"]&&(this.form["cover"]=this["cover"]),null!==this["money"]&&(this.form["money"]=this["money"]),null!==this["seller"]&&(this.form["seller"]=this["seller"]),null!==this["purchasing_users"]&&(this.form["purchasing_users"]=this["purchasing_users"]),null!==this["purchase_quantity"]&&(this.form["purchase_quantity"]=this["purchase_quantity"]),null!==this["total_amount"]&&(this.form["total_amount"]=this["total_amount"]),null!==this["customized_time"]&&(this.form["customized_time"]=this["customized_time"]),null!==this["requirement_document"]&&(this.form["requirement_document"]=this["requirement_document"]),null!==this["remarks"]&&(this.form["remarks"]=this["remarks"]),console.log(this.form),this.submit()},change_file:function(t){var r=this;e.chooseFile({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(i){var o=i.tempFilePaths,n=e.uploadFile({url:r.$fullUrl("/api/i_want_to_customize/upload?"),filePath:o[0],name:"file",formData:{i_want_to_customize:"test"},header:{"x-auth-token":r.$store.state.user.token},success:function(e){var i=JSON.parse(e.data).result.url;r.form[t]=i}});n.onProgressUpdate((function(e){r.percent=e.progress,console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend)}))},error:function(e){console.log(e)}})},change_img:function(t){var r=this;r.upload_img_flag=!1,e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(i){var o=i.tempFilePaths,n=e.uploadFile({url:r.$fullUrl("/api/i_want_to_customize/upload?"),filePath:o[0],name:"file",formData:{i_want_to_customize:"test"},header:{"x-auth-token":r.$store.state.user.token},success:function(e){var i=JSON.parse(e.data).result.url;r.form[t]=i}});n.onProgressUpdate((function(e){r.percent=e.progress,console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend)}))},error:function(e){console.log(e)}})},get_obj_before:function(t){var r=e.db.get("form");r&&(delete r.examine_state,delete r.examine_reply,this.obj=e.push(this.obj,r),this.form=e.push(this.form,r));var i=[];for(var o in r)i.push(o);for(var n=0;n<i.length;n++)this.disabledObj[i[n]+"_isDisabled"]=!0;return this.form["customized_time"]&&-1===JSON.stringify(this.form["customized_time"]).indexOf("-")&&(this.form["customized_time"]=this.$toTime(parseInt(this.form["customized_time"]),"yyyy-MM-dd hh:mm:ss")),e.db.del("form"),this.get_list(),t},get_list_user_seller:function(){var e=this;return u(n().mark((function t(){var r;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("~/api/user/get_list?user_group=商城卖家");case 2:r=t.sent,r.result&&r.result.list?r.result.list.map((function(t){return e.list_user_seller.push({value:t.user_id,text:t.nickname+"-"+t.username})})):r.error&&console.error(r.error);case 4:case"end":return t.stop()}}),t)})))()},get_list_user_purchasing_users:function(){var e=this;return u(n().mark((function t(){var r;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("~/api/user/get_list?user_group=注册用户");case 2:r=t.sent,r.result&&r.result.list?r.result.list.map((function(t){return e.list_user_purchasing_users.push({value:t.user_id,text:t.nickname+"-"+t.username})})):r.error&&console.error(r.error);case 4:case"end":return t.stop()}}),t)})))()},get_group_user_purchasing_users:function(){var e=this;return u(n().mark((function t(){var r;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form["purchasing_users"]=e.user.user_id,t.next=3,e.$get("~/api/user_group/get_obj?name=注册用户");case 3:r=t.sent,r.result&&r.result.obj?(e.group_user_purchasing_users=r.result.obj,e.get_user_session_purchasing_users(e.form["purchasing_users"])):r.error&&console.error(r.error);case 5:case"end":return t.stop()}}),t)})))()},get_user_session_purchasing_users:function(e){var t=this,r={user_id:e},i="~/api/"+t.group_user_purchasing_users.source_table+"/get_obj?";this.$get(i,r,(function(r){if(r.result&&r.result.obj){var i=[];for(var o in r.result.obj)i.push(o);var n=[];for(var s in t.form)n.push(s);t.form["purchasing_users"]=e,t.disabledObj["purchasing_users_isDisabled"]=!0;for(var u=0;u<i.length;u++)if("examine_state"!==i[u]&&"examine_reply"!==i[u])for(var c=0;c<n.length;c++)if(i[u]===n[c]){if("purchasing_users"!==i[u]){t.form[n[c]]=r.result.obj[i[u]],t.disabledObj[n[c]+"_isDisabled"]=!0;break}t.disabledObj[n[c]+"_isDisabled"]=!0}}}))},set_total_amount:function(){this.form.total_amount=parseFloat(this.form.money)*parseFloat(this.form.purchase_quantity);var e=/^\+?[1-9][0-9]*$/;e.test(this.form.total_amount)||(this.form.total_amount=this.form.total_amount.toFixed(2))},get_obj_after:function(e,t){this.form["customized_time"]&&-1===JSON.stringify(this.form["customized_time"]).indexOf("-")&&(this.form["customized_time"]=this.$toTime(parseInt(this.form["customized_time"]),"yyyy-MM-dd hh:mm:ss"))},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/i_want_to_customize/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/i_want_to_customize/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/i_want_to_customize/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/i_want_to_customize/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/i_want_to_customize/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},buySeat:function(){for(var e=this.seatArray.slice(),t=0;t<this.seatRow;t++)for(var r=0;r<this.seatCol;r++)1===e[t][r]&&(e[t][r]=2);this.seatArray=e;for(var i="",o=0;o<e.length;o++)for(var n=e[o],s=0;s<n.length;s++)2===e[o][s]&&(i=""==i?""+(8*o+s):i+","+(8*o+s));var u=this.obj.seat,c="";if(""!=i&&null!=i){var a=i.split(","),l=this.seatList;if(0!=l.length)for(var _=l.split(","),m=0;m<a.length;m++)-1==_.indexOf(a[m])&&-1==u.indexOf(a[m])&&(""==u||null==u?(u=a[m]+"",c=u):-1==u.indexOf(a[m])&&(u=u+","+a[m],c=""==c||null==c?a[m]:c+","+a[m]));else u=i}""==this.form.seat?this.form.seat=u:""!=c&&(this.form.seat=this.form.seat+","+c),this.seatList=i},handleChooseSeat:function(e,t){var r=this.seatArray[e][t],i=this.seatArray;2!==r&&(1===r?i[e][t]=0:0===r&&(i[e][t]=1),this.seatArray=i.slice())},get_list:function(){var e=this;return u(n().mark((function t(){var r,i,o,s,u;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get("~/api/i_want_to_customize/get_list",{product_number:e.form.product_number});case 2:if(r=t.sent,r.result&&r.result.list?e.list_=r.result.list:r.error&&console.error(r.error),console.log(r),i=r.result.list,null!=i&&0!=i.length){for(o="",s=0;s<i.length;s++)u=i[s].seat,null!=u&&""!=u&&(o=""==o?u+"":o+","+u);e.seatList=o}e.initSeatArray(5,8);case 8:case"end":return t.stop()}}),t)})))()},initSeatArray:function(){var t=this,r=this.seatList,i=r.split(",");""!=r&&null!=r||(i=[]),this.seatArr=i;var o=Array(this.seatRow).fill(0).map((function(){return Array(t.seatCol).fill(0)}));this.seatArray=o;for(var n=0;n<i.length;n++){var s=Math.floor(i[n]/8),u=i[n]%8;o[s][u]=2}var c=this;e.createSelectorQuery().in(this).select("#innerSeatWrapper").boundingClientRect((function(e){c.seatSize=e?parseInt(parseInt(e.width,10)/c.seatCol,8):0,c.size=parseInt(e.width,9)})).exec((function(e){}))}},created:function(){this.get_list_user_seller(),this.get_list_user_purchasing_users(),this.get_group_user_purchasing_users()},watch:{"form.product_number":{handler:function(){this.check_limit()}}}}}).call(this,r("543d")["default"])},5457:function(e,t,r){},"713e":function(e,t,r){"use strict";var i=r("5457"),o=r.n(i);o.a},"883f":function(e,t,r){"use strict";r.r(t),function(e){r("6cdc"),r("66fd");var t=r("10f7");wx.__webpack_require_UNI_MP_PLUGIN__=r,e(t["a"])}.call(this,r("543d")["createPage"])}},[["883f","common/runtime","common/vendor"]]]);